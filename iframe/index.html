<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body style="height: 1000px">
<iframe width="100%" height="auto" src="s_21.html" id="ppp">

</iframe>

<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    /*
     * In window A's scripts, with A being on <http://example.com:8080>:
     */

    var popup = window.frames[0];

    // When the popup has fully loaded, if not blocked by a popup blocker:

    // This does nothing, assuming the window hasn't changed its location.
    popup.postMessage("The user is 'bob' and the password is 'secret'",
            "http://localhost:63342");

    // This will successfully queue a message to be sent to the popup, assuming
    // the window hasn't changed its location.
    popup.postMessage("hello there!", "http://localhost:63342");

    function receiveMessage(event)
    {
        // Do we trust the sender of this message?  (might be
        // different from what we originally opened, for example).
      console.log("..")

        // event.source is popup
        // event.data is "hi there yourself!  the secret response is: rheeeeet!"
    }
    window.addEventListener("message", receiveMessage, false);
//    var x = document.getElementById("ppp");
//    var y = (x.contentWindow || x.contentDocument);
//    if (y.document)y = y.document;
//    y.body.onscroll = function(){
//        console.log(arguments)
//    }
  //  y.body.style.backgroundColor = "red";
    $(popup).scroll(function() {
        if($(popup).scrollTop() + $(popup).height() == $(popup.document).height()) {
            alert("bottom!");
        }
    });
</script>
</body>
</html>
