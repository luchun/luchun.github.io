<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>玫琳凯</title>
    <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
<div class="page-wrapper">
    <div id="Imgbox" class="img-block"></div>
    <div class="card">
        <img src="images/logo.png" alt="" class="abs-img">
        <h2 class="card-name" id="consultantName">玫小琳</h2>
        <p class="card-info">邀您参与玫琳凯 <span>"美美哒"</span> 美丽服务</p>
        <a href="tel:135 8866 9999" class="tel-call" id="consultantTel"><span class="tel-icon"></span> 135 8866 9999</a>
    </div>
</div>
<div class="site-footer"></div>

<script>

     var data = {
         name: "玫小小琳",                                    //美容顾问姓名  String
         tel: 13588669899,                                 //联系电话      Number型
         src:"images/tmp1.jpg"                         //图片路径      String
     };

     /**
      * Reset Body font-size
      * @function
      */
     var rs=function(){
         var dw=document.documentElement.clientWidth;
         var dh=document.documentElement.clientHeight;
         document.body.style.fontSize = dw/320+"em";
     };
     /**
      * Replace dom text with data object
      * @function
      * @param {string} id - The id of the dom.
      * @param {(string|string[]|number)}  text - The text want to replace.
      * @param {string[]} src - [href.type,href.src] | null
      */
     /* PLACEHOLDER */

     function replaceTextNode(id, text, src) {

         var node = document.getElementById(arguments[0]),
                 toString = Object.prototype.toString,
                 typeArray= ["email","tel","sms"],//可选的类型，有邮件，短信，电话等
                 readtext  = null;

         if(typeof text === "string"){
             readtext = text;
         }else if(typeof text === "object" && toString.call(text) === "[object Array]"){
             readtext = text.join(" ");
         }else if(typeof text === "number"){
             readtext = text.toString().substr(0,3) + " " + text.toString().substr(3,4) + " " + text.toString().substr(7,4)
         }else{
             throw new TypeError("Want a String or a Array");
         }

         if(node.childNodes.length>1){
             node.childNodes[node.childNodes.length-1].nodeValue = readtext;
         }else{
             node.innerHTML = readtext
         }

         if(src){
             if(typeArray.indexOf(src[0])>-1){
                 node.href = src[0]+":"+src[1];
             }else{
                 node.href = src[1];
             }
         }

     }


     /**
      *  load Image
      *  @function
      * @param {string} src - The src of the image
      * @param {function}  cb - The callback function after load image object,the only param is the image object.
      */
     function loadImage(src, cb){

         var newImage =  document.createElement("img");
         newImage.src = src;
         cb(newImage);
     }

    //document ready event
    document.addEventListener("DOMContentLoaded", function(event) {

        //调整字体
        rs();

        //替换信息
        replaceTextNode("consultantName", data.name);
        replaceTextNode("consultantTel", data.tel,["tel",data.tel]);

        //替换图片
        loadImage(data.src, function(img){
            var Imgbox = document.getElementById("Imgbox");
            img.style.display = "block";
            img.style.width = "100%";
            Imgbox.appendChild(img);
        })

    });

</script>
</body>
</html>
