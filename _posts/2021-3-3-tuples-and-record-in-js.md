---
layout: post
title: JavaScriptä¸­çš„Tupleså’ŒRecords
---
ä»Šå¤©çœ‹åˆ°Babel7.13å‘å¸ƒï¼Œä¸»è¦æ›´æ–°æ˜¯å¼€å§‹æ”¯æŒå…ƒç»„å’Œè®°å½•ï¼Œå°±äº†è§£äº†ä¸€ä¸‹è¿™ä¸¤ä¸ªåŸå§‹ç±»å‹
<!-- more -->
ä¸å¯å˜æ€§æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å¸¸è§æœ¯è¯­ï¼Œä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ã€‚ä¸å¯å˜æ€§å¯¹è±¡æ„å‘³ä¸€ä¸ªå˜é‡ä¸€æ—¦å£°æ˜ï¼Œå®ƒçš„å€¼å°±æ°¸è¿œä¸èƒ½æ”¹å˜ã€‚å¦‚
```javascript
const arr = [0,1,2,3]
arr.shift()
// arr = [1,2,3]
const list = Immutable.List([0,1,2,3])
list.shift()
// list = [0,1,2,3]
```
å‰è€…ä¼šæ”¹å˜æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ–¹æ¡ˆä¼šè¿”å›ä¸€ä¸ªæ–°çš„Listï¼Œæ¯”åŸListå°‘äº†ç¬¬ä¸€ä½ï¼ŒåŸListä¸ä¼šæ”¹å˜ã€‚
åœ¨JavaScriptä¸­å¹¶æ²¡æœ‰çœŸæ­£çš„ä¸å¯å˜æ€§å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡å˜é€šçš„æ–¹å¼å®ç°ä¸å¯å˜æ€§ï¼Œæˆ–è€…æ˜¯ç›¸ä¿¡å…¶ä»–äººä¸ä¼šæ”¹å˜æŸä¸ªå€¼ã€‚

ç°åœ¨æœ‰äº†ä¸€ä¸ªæ–°çš„ECMAScriptææ¡ˆ--ç›®å‰åœ¨ç¬¬äºŒé˜¶æ®µï¼Œå°†å¼•å…¥ä¸¤ä¸ªæ–°çš„ä¸å¯å˜æ€§æ•°æ®ç±»å‹ï¼šå…ƒç»„å’Œè®°å½•ã€‚

## å…ƒç»„(Tuples)
å…ƒç»„å’Œè®°å½•æœ‰ç›¸åŒçš„è¯­æ³•ï¼Œé€šè¿‡åœ¨å¯¹è±¡æˆ–æ•°ç»„å‰åŠ #å‰ç¼€æ¥å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š
```javascript
const arr = [] // æ­£å¸¸çš„æ•°ç»„
const tuple = #[] // è¿™æ˜¯ä¸€ä¸ªå…ƒç»„
```
ä½¿ç”¨å…ƒç»„æ—¶ï¼Œæœ‰å‡ é¡¹æ³¨æ„äº‹é¡¹
* æ•°ç»„ä¸­ä¸èƒ½æœ‰ç©ºæ´ï¼Œå¦‚ [1,,2]ä¸å¯ä»¥
* åªèƒ½æ˜¯åŸå§‹ç±»å‹æˆ–å…¶ä»–å…ƒç»„/è®°å½•
* æ”¯æŒç±»ä¼¼Arrayçš„å®ä¾‹æ–¹æ³•ï¼Œä½†æœ‰ä¸€ç‚¹æ”¹å˜

ä¾‹å¦‚ï¼Œä¼šä½¿æ•°ç»„å‘ç”Ÿçªå˜çš„æ“ä½œè¢«æ›¿æ¢äº†ä¸ºè¿”å›æ–°çš„æ•°ç»„ã€‚
å¦‚ï¼Œæ²¡æœ‰`push`æ–¹æ³•ï¼Œæ›¿ä»£çš„å¯ä»¥ä½¿ç”¨`pushed`,å®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„å…ƒç»„ã€åŒ…å«äº†è¢«æ¨å…¥çš„å€¼ï¼›
`with`è¿”å›æ”¹å˜ç»™å®šé”®ä½çš„å€¼åçš„å…ƒç»„ã€‚
```
const tuple = #['ğŸ„', 'ğŸ…', 'ğŸ¥•'];

// Both returns a new tuple
tuple.pushed('ğŸ¥’');  // returns #['ğŸ„', 'ğŸ…', 'ğŸ¥•', 'ğŸ¥’'];
tuple.with(0, 'ğŸŒ³'); // returns #['ğŸŒ³', 'ğŸ…', 'ğŸ¥•']
```

å¯ä»¥ç”¨`Tuple.from`ä»ç°æœ‰çš„æ•°ç»„åˆ›å»ºå…ƒç»„
```
Tuple.from(['ğŸ„', 'ğŸ…', 'ğŸ¥•']);

// Likewise, you can turn a tuple into an ordinary array:
Array.from(tuple);
```
ä½†æ˜¯å½“ç”¨éåŸå§‹ç±»å‹æ¥æ›¿æ¢ç°æœ‰å…ƒç»„æ—¶ï¼Œä¼šæŠ¥é”™
```
const tuples = #['ğŸ„', 'ğŸ…', 'ğŸ¥•'];

// TypeError: Callback to Tuple.prototype.map may only return primitives, Records or Tuples
tuples.map(tuple => new Button(tuple));
```

## è®°å½•
ç±»ä¼¼å…ƒç»„ï¼Œè®°å½•å¯ä»¥é€šè¿‡#æ¥åˆ›å»º
// This is a regular object
const obj = { ... };

// This is a record
const record = #{
tuple: #['ğŸ„', 'ğŸ…', 'ğŸ¥•'] // Records can also contain tuples
};
ä½¿ç”¨è®°å½•æ—¶ï¼Œæœ‰ä¸€äº›è§„åˆ™
* ä¸èƒ½ä½¿ç”¨__proto__æ ‡è¯†ç¬¦
* ä¸å…è®¸æœ‰æ–¹æ³•ï¼Œå’Œå…ƒç»„ä¸€æ ·ï¼Œåªèƒ½åŒ…å«åŸå§‹ç±»å‹

ä¹Ÿå¯ä»¥é€šè¿‡`Record`æˆ– `Record.fromEntries` æ¥åˆ›å»ºæ–°çš„è®°å½•
```
const record = Record({
    mushroom: 'ğŸ„',
    tomato: 'ğŸ…',
    carrot: 'ğŸ¥•'
});

// Or
const record = Record.fromEntries(#['ğŸ„', 'ğŸ…', 'ğŸ¥•']);
```
å› ä¸ºä»–ä»¬æ˜¯æ–°çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨`typeof`ä¼šè¿”å›"record"
```
typeof #{ ... } // return "record"
typeof #[ ... ] // returns "tuple"
```

## ç»“å°¾
Babel7.13.0å¼€å§‹æ”¯æŒå…ƒç»„å’Œè®°å½•